# Midnight Vibe Platform - Environment Configuration
# Copy this file to .env and customize for your environment
# 
# Required variables for cloud deployment:
#   PROJECT_ID - Your Google Cloud project ID
#   STATE_BUCKET - GCS bucket for Terraform state storage
#
# Usage:
#   make cloud-deploy     # Full deployment (requires PROJECT_ID and STATE_BUCKET)
#   make cloud-build     # Build container only
#   make setup-bucket    # Create state bucket interactively

# ===========================================
# REQUIRED CONFIGURATION
# ===========================================

# Google Cloud Project Configuration
PROJECT_ID=your-gcp-project-id
STATE_BUCKET=your-gcp-project-terraform-state
STATE_PREFIX=terraform/state

# Cloud Build Service Account email (must be a user-managed SA, not the default)
# Example: midnight-cloudbuild-sa@my-project.iam.gserviceaccount.com
#
# To create a new SA for Cloud Build:
#   gcloud iam service-accounts create midnight-cloudbuild-sa --display-name="Midnight Cloud Build SA"
CLOUDBUILD_SA_EMAIL=

# ===========================================
# OPTIONAL CONFIGURATION
# ===========================================

# GCP Region (default: us-central1)
REGION=us-central1

# Environment label for resources (default: dev)
ENVIRONMENT=dev

# ===========================================
# WORKSTATION CLUSTER CONFIGURATION
# ===========================================

# Workstation cluster name (default: midnight-dev)
CLUSTER_NAME=midnight-dev

# Workstation machine type (default: n2-standard-8)
# Options: e2-standard-4, e2-standard-8, n2-standard-4, n2-standard-8, etc.
MACHINE_TYPE=n2-standard-8

# Persistent disk size in GB (default: 100)
PERSISTENT_DISK_SIZE_GB=100

# ===========================================
# WORKSTATION INSTANCES
# ===========================================
# Workstation instances are configured in terraform/workstations.auto.tfvars
# Copy terraform/workstations.auto.tfvars.example to terraform/workstations.auto.tfvars
# and customize with your workstation instances and admin users.
# Terraform automatically loads *.auto.tfvars files.

# ===========================================
# VERTEX AI CONFIGURATION
# ===========================================

# Enable Vertex AI and Model Garden access (default: true)
ENABLE_VERTEX_AI_ACCESS=true

# Vertex AI project (if different from main project)
GOOGLE_VERTEX_PROJECT=

# Vertex AI region (default: us-central1)
GOOGLE_VERTEX_REGION=us-central1



# ===========================================
# CONTAINER CONFIGURATION
# ===========================================

# Container image name (default: midnight-vibe-platform)
IMAGE_NAME=midnight-vibe-platform

# Container image tag (default: latest)
IMAGE_TAG=latest

# ===========================================
# GKE MIDNIGHT SERVICES CONFIGURATION
# ===========================================

# GKE Autopilot cluster name (default: midnight-dev-gke)
GKE_CLUSTER_NAME=midnight-dev-gke

# Chain environment: standalone, testnet, mainnet (default: standalone)
CHAIN_ENVIRONMENT=standalone

# Midnight stack version 0.18.0 (recommended)
MIDNIGHT_NODE_IMAGE=midnightntwrk/midnight-node:0.18.0
PROOF_SERVER_IMAGE=midnightnetwork/proof-server:6.2.0-rc.2
INDEXER_IMAGE=midnightntwrk/indexer-standalone:3.0.0-alpha.20
MIDNIGHT_TOOLKIT_VERSION=0.18.0

# Legacy stack version 0.12.1 (deprecated)
# MIDNIGHT_NODE_IMAGE=midnightnetwork/midnight-node:0.12.1
# PROOF_SERVER_IMAGE=midnightnetwork/proof-server:4.0.0
# INDEXER_IMAGE=midnightntwrk/indexer-standalone:2.1.4

# Indexer secret - 32-byte hex string for encryption (REQUIRED)
# Generate with: openssl rand -hex 32
INDEXER_SECRET=

# ===========================================
# MIDNIGHT SERVICE URLs (for midnightctl CLI)
# ===========================================
# These are auto-configured in GCP Workstation via Terraform.
# For local development, uncomment and set as needed.

# Option 1: Local services (default when running locally)
# Uncomment to use services running in local containers
# MIDNIGHT_NODE_URL=ws://localhost:9944
# INDEXER_URL=http://localhost:8088
# PROOF_SERVER_URL=http://localhost:6300

# Option 2: Remote GKE services
# Get external IPs with: kubectl get svc -n midnight-services
# MIDNIGHT_NODE_URL=ws://<node-external-ip>:9944
# INDEXER_URL=http://<indexer-external-ip>:8088
# PROOF_SERVER_URL=http://<proof-server-external-ip>:6300

# Toolkit binary path (installed via Dockerfile, usually not needed to override)
# MIDNIGHT_TOOLKIT_PATH=/usr/local/bin/midnight-node-toolkit

# ===========================================
# API SERVICES CONFIGURATION
# ===========================================

# Google Cloud APIs to enable (default includes all required services)
# Format: JSON array of API names
API_SERVICES=["workstations.googleapis.com","artifactregistry.googleapis.com","cloudbuild.googleapis.com","aiplatform.googleapis.com","vertexai.googleapis.com","container.googleapis.com"]

# ===========================================
# ADVANCED CONFIGURATION
# ===========================================

# Terraform operation flags (for advanced usage)
TERRAFORM_PLAN_ONLY=false
TERRAFORM_APPLY=true
TERRAFORM_DESTROY=false

# Auto-deploy after container build (default: false)
# Set to true to automatically deploy infrastructure after building
AUTO_DEPLOY=false

# Build only mode (default: false)
# Set to true to only build container without deployment
BUILD_ONLY=false